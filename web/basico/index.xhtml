<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:icecore="http://www.icefaces.org/icefaces/core"
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="cuerpo">
        <ice:form>
        <p>Hola #{sessionScope.currentUser.nombre} #{sessionScope.currentUser.apellidos}</p>
        <h:commandLink  action="#{basicoBean.nuevo()}">Abrir un nuevo Ticket</h:commandLink>
        
        <ace:dataTable id="carTable" binding="#{basicoBean.dataTable}" value="#{basicoBean.tickets}" var="var"
                       paginator="true" paginatorPosition="bottom" rows="10">
            <ace:column headerText="NÂº" >
                <h:outputText value="#{var.id}"/>
            </ace:column>
            <ace:column headerText="Estado" >
                <h:outputText value="#{var.estado.nombre}"/>
            </ace:column>
            <ace:column headerText="Asunto" >
                <h:outputText value="#{var.mensajes[0].asunto}"/>
            </ace:column>
            <ace:column headerText="Opciones" >
                <ace:pushButton rendered="#{!basicoBean.isCerrado}" action="#{basicoBean.editar()}" value="Editar"/>
                <ace:pushButton rendered="#{basicoBean.isCerrado}" action="#{basicoBean.editar()}" value="Ver"/>
            </ace:column>
        </ace:dataTable>
        
        </ice:form>
  </ui:define>
</ui:composition>

